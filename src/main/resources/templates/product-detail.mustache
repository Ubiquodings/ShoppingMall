{{>layout/header}}
<link rel="stylesheet" type="text/css" href="/css/product-list.css">
<link rel="stylesheet" type="text/css" href="/css/product-detail.css">
<link rel="stylesheet" type="text/css" href="/css/product-detail-quantity.css">

<!--
product-detail
-->

<!--
- 상품 이름 :  product.name
- 가격 :  product.price
- 상품 간단 설명 & 중량용량 & 구매수량 :: 다음에...

개수에 따른 총 상품 금액 은 프론트에서 이벤트로 처리해야 할 로직인듯 !
-->


{{#product}}
    {{name}}
    <input type="hidden" value="{{id}}" id="input-product-id"/>


    <div class="card">
        <div class="container-fliud">
            <div class="wrapper row">
                <div class="preview col-md-6">

                    <div class="preview-pic tab-content">
                        <div class="tab-pane active" id="pic-1">
                            <img src="{{imgUrl}}" alt="상품 대표 이미지" class="img-thumbnail">
                        </div>
                    </div>

                </div>

                <div class="details col-md-6">
                    <h3 class="product-title">{{name}}</h3>
                    <div class="rating">
                        <div class="stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star"></span>
                            <span class="fa fa-star"></span>
                        </div>
                    </div>
                    <p class="product-description">{{description}}</p>
                    <h4 class="price">Price: <span>{{price}}</span> <span class="won">원</span></h4>


<!--                    <body onload="init();">-->
                    <script language="JavaScript">
                        $(document).ready(function () { // 문서가 준비되면
                            init();
                        });

                        var sell_price;
                        var amount;

                        function init() {
                            sell_price = document.form.sell_price.value;
                            amount = document.form.amount.value;
                            document.form.sum.value = sell_price;
                            change();
                        }

                        function add() {
                            hm = document.form.amount;
                            sum = document.form.sum;
                            hm.value++;

                            sum.value = parseInt(hm.value) * sell_price;
                        }

                        function del() {
                            hm = document.form.amount;
                            sum = document.form.sum;
                            if (hm.value > 1) {
                                hm.value--;
                                sum.value = parseInt(hm.value) * sell_price;
                            }
                        }

                        function change() {
                            hm = document.form.amount;
                            sum = document.form.sum;

                            if (hm.value < 0) {
                                hm.value = 0;
                            }
                            sum.value = parseInt(hm.value) * sell_price;
                        }
                    </script>

                    <!--채민 css 부분 -->

                    <form name="form" method="get">

                        <input type=hidden name="sell_price" value="{{price}}">

                        <div class="quantity">

                            <button class="minus-btn" type="button" name="button" value=" - " onclick="del();">
                                <!--<img src="minus.svg" alt="" />-->
                                <img src="/icon/minus.svg" alt=""/>
                            </button>

                            <input type="text" name="amount" value="1" id="count" onchange="change();">

                            <button class="plus-btn" type="button" name="button" value=" + " onclick="add();">
                                <!--<img src="plus.svg" alt="" />-->
                                <img src="/icon/plus.svg" alt=""/>
                            </button>
                        </div>


                        <h4 class="product_total_price">
                            총 주문 금액:
                            <input type="text" name="sum" readonly>
                            <span>원</span>
                        </h4>


                    </form>

                    <div class="action">
                        <!--
                                <button type="button" class="btn btn-primary btn-lg" id="btn-shoplist">장바구니</button>
                                <button type="button" class="btn btn-primary btn-lg" id="btn-order">바로주문</button>
                        -->
                        <button type="button" class="btn btn-primary btn-lg btn-shoplist">
                            <input type="hidden" value="{{id}}"/>
                            <!--<input type="hidden" value= #count/>
                            <input type="hidden" name="amount" value="1" onchange="change();">-->
                            장바구니
                        </button>

                        <button type="button" class="btn btn-primary btn-lg btn-order-immediately-from-detail">
                            <input type="hidden" value="{{id}}"/>바로주문
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{{/product}}

<div class="row" id="userNumber">

</div>

<div class="row recommended-product-list">
    {{#recommendedList}}
        <div class="col-md-3 product-list-card-body">
            <input type="hidden" value="{{id}}"/>
            <div class="ibox">
                <div class="ibox-content product-box">
                    <div class="product-imitation">
                        <img src="{{imgUrl}}"/>
                    </div>
                    <div class="product-desc">
                        <!--
                            <span class="product-discount">
                            save 10%
                        </span>
                            -->
                        <a href="#" class="product-name">{{name}}</a>
                        <small class="product-price">{{price}}</small>
                        <div class="small m-t-xs description">
                            {{description}}
                        </div>
                        <div class="m-t text-left">
                            <a href="#" class="btn btn-xs btn-outline btn-success" style="margin-top: 10px">장바구니 </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {{/recommendedList}}
</div>

<!--상품 디테일 소켓 추가-->
<script src="/js/app/product-socket.js"></script>
<!--상품 카운트 로직 추가-->
<!--<script src="/js/app/product-detail-cal.js"></script>-->
{{>layout/footer}}